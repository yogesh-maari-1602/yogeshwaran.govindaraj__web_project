<!DOCTYPE html>
<html>

<head>
    <title>Login Page</title>
    <link rel="stylesheet" href="../assest/css/Login.css">
</head>

<body>
    <div class="container">

        <a href="../pages/Login.html"></a><img src="../assest/image/logo.jpg" width="114px">

        <h1>Login</h1>
        <form id="form">

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>


            <label for="password">Password</label>
            <input type="password" id="password" name="password" required>



            <a href="../pages/index.html"><button class="btn" type="submit">Login</button></a>
        </form>
    </div>

    <script>
        let logIn = document.getElementById("form");
        // console.log(logIn);

        let arr = [];

        logIn.addEventListener("submit", (event) => {
            event.preventDefault();
            let defaultData = JSON.parse(localStorage.getItem("Donorregister"));
            console.log(defaultData);

            let email = document.getElementById("email").value.toLowerCase().trim();
            let password = document.getElementById("password").value;

            let match = false;

            for (let i = 0; i < defaultData.length; i++) {
                if (
                    email == defaultData[i]["email"] &&
                    password == defaultData[i]["password"]
                ) {
                    match = true;
                    arr.push(defaultData[i]);
                    window.localStorage.setItem(
                        "logIn",
                        JSON.stringify(arr[0]["email"])
                    );
                    break;

                } else {
                    match = false;
                }
            }

            if (match == true) {
                alert("Success");

                window.location.href = "/pages/index.html";
            } else {
                alert("Login credentials not correct");
            }
        });



    </script>
</body>

</html>